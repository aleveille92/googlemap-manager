var GoogleMapManager=function(e,t){t=void 0===t?{}:t;var o={googleMap:{center:{lat:0,lng:0},zoom:5,maxZoom:20,minZoom:3,disableDefaultUI:!0,clickableIcons:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM,style:google.maps.ZoomControlStyle.SMALL},mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}},markers:{closeOthers:!0,cluster:!1,infoBubble:!1},styles:[]};this.settings={},this.settings.googleMap=this.merge(o.googleMap,t.googleMap),this.settings.markers=this.merge(o.markers,t.markers),this.settings.styles=t.styles?t.styles:o.styles,this.elementId=e;var r=this.getElement();return this.map=new google.maps.Map(r,this.settings.googleMap),this.map.mapTypes.set("map_style",new google.maps.StyledMapType(this.settings.styles,{name:"Styled Map"})),this.map.setMapTypeId("map_style"),this.markers={},this.infowindows={},(r.googleMapManager=this).createCluster(),this.canUseInfoBubble(),this};GoogleMapManager.prototype.getElement=function(){return document.getElementById(this.elementId)},GoogleMapManager.prototype.addMarker=function(e,t){manager=this;var o,r=new google.maps.Marker({position:new google.maps.LatLng(e.lat,e.lng),map:this.map,icon:e.icon||"",title:e.title||""});if("string"==typeof e.categories&&(e.categories=[e.categories]),r.id=e.id,r.categories=e.categories||[],r.unfilterable=e.unfilterable,this.markers[e.id]=r,this.infobubble){var s={content:'<div class="map-info-window">'+(e.template||e.title)+"</div>",padding:15,borderRadius:0,shadowStyle:0,disableAutoPan:!0,disableAnimation:!0};t=this.merge(s,this.settings.markers.infobubble);o=new InfoBubble(t)}else o=new google.maps.InfoWindow({content:'<div class="map-info-window">'+(e.template||e.title)+"</div>"});return this.infowindows[e.id]=o,google.maps.event.addListener(r,"click",function(e){if(manager.settings.markers.closeOthers)for(var t in manager.infowindows)manager.getInfowindow(t).close();manager.getInfowindow(this.id).open(manager.map,this),manager.trigger("markerOpened",this)}),google.maps.event.addListener(o,"closeclick",function(){manager.trigger("markerClosed",this)}),this.cluster&&this.cluster.addMarker(r),r},GoogleMapManager.prototype.createCluster=function(e){if(void 0===e&&(e=[]),this.settings.markers.cluster)return"function"==typeof MarkerClusterer?(this.cluster=new MarkerClusterer(this.map,e,this.settings.markers.cluster),this.cluster):(console.error('MarkerClusterer is required with "options.markers.cluster: {...}" : https://github.com/googlemaps/js-marker-clusterer'),!1)},GoogleMapManager.prototype.getMarker=function(e){return this.markers[e]},GoogleMapManager.prototype.showMarker=function(e,t){"number"!=typeof e&&"string"!=typeof e||(e=this.getMarker(e)),void 0===t&&(t=!0),t?(e.setMap(this.map),this.cluster&&this.cluster.addMarker(e)):(this.getInfowindow(e.id).close(),e.setMap(null),this.cluster&&this.cluster.removeMarker(e))},GoogleMapManager.prototype.hideMarker=function(e){this.showMarker(e,!1)},GoogleMapManager.prototype.openMarker=function(e){"number"!=typeof e&&"string"!=typeof e||(e=this.getMarker(e)),new google.maps.event.trigger(e,"click")},GoogleMapManager.prototype.filterMarkers=function(e){this.cluster&&this.cluster.clearMarkers();var t=this.markers;for(var o in t){var r=this.getMarker(o);r.unfilterable||(0<=r.categories.indexOf(e)||!e?this.showMarker(r):this.hideMarker(r))}},GoogleMapManager.prototype.getInfowindow=function(e){return this.infowindows[e]},GoogleMapManager.prototype.canUseInfoBubble=function(){this.settings.markers.infobubble&&("function"==typeof InfoBubble?this.infobubble=!0:console.error('InfoBubble is required with "options.markers.infobubble: {...}" : https://github.com/googlemaps/js-info-bubble'))},GoogleMapManager.prototype.zoomIn=function(e){return void 0===e&&(e=1),this.map.setZoom(this.map.getZoom()+e),this},GoogleMapManager.prototype.zoomOut=function(e){return void 0===e&&(e=1),this.map.setZoom(this.map.getZoom()-e),this},GoogleMapManager.prototype.boundZoom=function(){var e=new google.maps.LatLngBounds,t=0;for(var o in this.markers)null===this.markers[o].getMap()||this.markers[o].unfilterable||(t++,e.extend(this.markers[o].getPosition()));if(t){this.map.fitBounds(e);this.trigger("boundZoomed",this)}return this},GoogleMapManager.prototype.trigger=function(e,t){var o=new CustomEvent(e,{detail:t});this.getElement().dispatchEvent(o)},GoogleMapManager.prototype.on=function(e,t){var o=this;return this.getElement().addEventListener(e,function(e){t.call(o,e.detail)})},GoogleMapManager.prototype.merge=function(){for(var e,t={},o=0,r=arguments.length;o<r;o++)for(e in arguments[o])arguments[o].hasOwnProperty(e)&&(t[e]=arguments[o][e]);return t},function(){if("function"==typeof window.CustomEvent)return;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}e.prototype=window.Event.prototype,window.CustomEvent=e}();